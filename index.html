document.addEventListener('DOMContentLoaded', () => {
// Constants
const feyaNames = ['FATHA','JAGU','MOSFA','SETI','LATHU','KEPTA','VOMJA'];
const feyaColors = ['#8fb7d7','#b8a0d1','#e08e84','#d9b070','#efe18a','#9ccf9b','#76cbd0'];
const totalKishepDays = 52;
const pie = document.getElementById('pie');
const pieCenter = document.getElementById('pieCenter');
const gregLine = document.getElementById('gregLine');
const pashoLine = document.getElementById('pashoLine');
const dayFill = document.getElementById('dayFill');
const dayLabel = document.getElementById('dayLabel');
const k1fill = document.getElementById('k1fill');
const k1label = document.getElementById('k1label');
const k2fill = document.getElementById('k2fill');
const k2label = document.getElementById('k2label');
const k3fill = document.getElementById('k3fill');
const k3label = document.getElementById('k3label');
const feyaRow = document.getElementById('feyaRow');
const liveClock = document.getElementById('liveClock');

// Build Feya chips
feyaRow.innerHTML = '';
feyaNames.forEach((f, i)=>{
const chip = document.createElement('div');
chip.className = 'feyaChip';
chip.style.backgroundColor = feyaColors[i]+'22';
chip.textContent = f;
feyaRow.appendChild(chip);
});

function updateAll() {
const now = new Date();
const hours = now.getHours();
const minutes = now.getMinutes();
const seconds = now.getSeconds();
const millis = now.getMilliseconds();
const totalSecondsToday = hours*3600 + minutes*60 + seconds + millis/1000;

```
// Clock
liveClock.textContent = now.toLocaleTimeString();

// Feya progress
const feyaPercent = totalSecondsToday/(24*3600)*100;
dayFill.style.width = feyaPercent+'%';
dayLabel.textContent = Math.floor(feyaPercent)+'%';

// Kishep day
const startOfYear = new Date(now.getFullYear(),0,1);
const diffDays = Math.floor((now-startOfYear)/(1000*60*60*24));
const dayInKishep = diffDays % totalKishepDays +1;
const kishepPercent = dayInKishep/totalKishepDays*100;
k1fill.style.width = kishepPercent+'%';
k1label.textContent = dayInKishep+'/'+totalKishepDays;

// Moon quarter (1–7)
const moonQuarter = ((dayInKishep-1)%7)+1;
const moonPercent = moonQuarter/7*100;
k2fill.style.width = moonPercent+'%';
k2label.textContent = moonQuarter+'/7';

// Tokaido day (1–7)
const tokaidoDay = ((dayInKishep-1)%7)+1;
const tokaidoPercent = tokaidoDay/7*100;
k3fill.style.width = tokaidoPercent+'%';
k3label.textContent = tokaidoDay+'/7';

// Update header labels
gregLine.textContent = now.toLocaleDateString();
pashoLine.textContent = 'Day '+dayInKishep;

// Pie chart
pie.innerHTML = '';
let startAngle = -90;
feyaColors.forEach((c,i)=>{
  const sliceAngle = 360/7;
  const x1 = 50 + 50*Math.cos(Math.PI*startAngle/180);
  const y1 = 50 + 50*Math.sin(Math.PI*startAngle/180);
  startAngle += sliceAngle;
  const x2 = 50 + 50*Math.cos(Math.PI*startAngle/180);
  const y2 = 50 + 50*Math.sin(Math.PI*startAngle/180);
  const largeArc = sliceAngle>180?1:0;
  const path = document.createElementNS('http://www.w3.org/2000/svg','path');
  path.setAttribute('d',`M50 50 L ${x1} ${y1} A 50 50 0 ${largeArc} 1 ${x2} ${y2} Z`);
  path.setAttribute('fill',c);
  pie.appendChild(path);
});
pieCenter.textContent = feyaNames[(dayInKishep-1)%7];
```

}

updateAll();
setInterval(updateAll,1000);
});
