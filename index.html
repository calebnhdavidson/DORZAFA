<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dorzafa — Live Calendar</title>
<style>
:root{
  --bg:#0b0c10; --card:#111217; --muted:#9aa0a6; --pad:14px;
  --fatha:#8fb7d7; --jagu:#b8a0d1; --mosfa:#e08e84;
  --seti:#d9b070; --lathu:#efe18a; --kepta:#9ccf9b; --vomja:#76cbd0;
  --text:#e9eef6;
}
html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;}
body{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:18px;box-sizing:border-box;}
.wrap{width:100%;max-width:980px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:14px;padding:var(--pad);box-sizing:border-box;border:1px solid rgba(255,255,255,0.03);}
header{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;}
.title{font-family:Georgia,serif;font-size:20px;margin:0;}
.dateBlock{display:flex;flex-direction:column;}
.greg{font-weight:700;font-size:15px;margin:0;}
.pasho{color:var(--muted);font-size:13px;margin-top:6px;}
.visuals{display:flex;gap:12px;align-items:center;flex-wrap:wrap;}
.pieWrap{width:120px;height:120px;border-radius:12px;background:var(--card);display:flex;align-items:center;justify-content:center;position:relative;border:1px solid rgba(255,255,255,0.02);}
#pie{width:100%;height:100%;}
.pieCenter{position:absolute;font-weight:800;}
.moonBox{width:64px;height:64px;border-radius:12px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;}
.clock{font-size:13px;color:var(--muted);text-align:right;}
.bars{margin-top:14px;display:flex;flex-direction:column;gap:12px;}
.barLabel{display:flex;justify-content:space-between;color:var(--muted);font-weight:600;font-size:13px;}
.track{height:36px;background:rgba(255,255,255,0.02);border-radius:999px;overflow:hidden;border:1px solid rgba(255,255,255,0.02);}
.fill{height:100%;width:0%;display:flex;align-items:center;justify-content:center;color:#000;font-weight:800;transition:width .45s ease;padding:0 8px;}
.feyaRow{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap;}
.feyaChip{background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:999px;font-size:12px;color:var(--muted);}
.gridWrap{margin-top:14px;}
.gridTitle{display:flex;justify-content:space-between;align-items:center;color:var(--muted);margin-bottom:8px;}
.weekHeader{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;margin-bottom:6px;}
.weekHeader div{text-align:center;color:var(--muted);font-weight:700;font-size:12px;}
.grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;}
.dayCell{background:rgba(255,255,255,0.02);border-radius:8px;padding:8px;text-align:center;min-height:56px;box-sizing:border-box;border:1px solid rgba(255,255,255,0.02);}
.dayNum{font-weight:800;}
.dayGreg{font-size:12px;color:var(--muted);margin-top:6px;}
.past{opacity:0.45;}
.today{outline:2px solid #fff;border-radius:8px;}
.future{opacity:0.9;}
.legend{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap;color:var(--muted);font-size:13px;}
.sw{width:14px;height:9px;border-radius:3px;}
@media(max-width:700px){ .wrap{padding:12px} .pieWrap{width:92px;height:92px} .dayCell{min-height:44px;padding:6px} .track{height:30px} }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="dateBlock">
      <div class="title">Dorzafa — Live</div>
      <div class="greg" id="gregLine">—</div>
      <div class="pasho" id="pashoLine">—</div>
    </div>
    <div class="visuals">
      <div class="pieWrap" title="Kishep wheel">
        <svg id="pie" viewBox="-60 -60 120 120"></svg>
        <div class="pieCenter" id="pieCenter">—</div>
      </div>
      <div style="display:flex;flex-direction:column;align-items:flex-end">
        <div class="moonBox" id="moonBox" title="Moon phase"></div>
        <div class="clock" id="liveClock">—</div>
      </div>
    </div>
  </header>

  <div class="bars">
    <div>
      <div class="barLabel"><div>Kishep (progress)</div><div id="k1label">—</div></div>
      <div class="track"><div id="k1fill" class="fill"></div></div>
    </div>
    <div>
      <div class="barLabel"><div>Moon-quarter (1–7)</div><div id="k2label">—</div></div>
      <div class="track"><div id="k2fill" class="fill"></div></div>
    </div>
    <div>
      <div class="barLabel"><div>Tokaido day (1–7)</div><div id="k3label">—</div></div>
      <div class="track"><div id="k3fill" class="fill"></div></div>
    </div>
    <div>
      <div class="barLabel"><div>Feya progress (midnight→midnight)</div><div id="dayLabel">—</div></div>
      <div class="track"><div id="dayFill" class="fill"></div></div>
      <div class="feyaRow" id="feyaRow"></div>
    </div>
  </div>
</div>

<script>
function pad(num){return num.toString().padStart(2,'0');}

function updateLiveClock(){
  const now = new Date();
  document.getElementById('liveClock').textContent = now.toLocaleTimeString();
  requestAnimationFrame(updateLiveClock);
}
updateLiveClock();

// Example: simple Kishep calendar demo data
const feyaNames = ["FATHA","JAGU","MOSFA","SETI","LATHU","KEPTA","VOMJA"];
function updateBars(){
  const now = new Date();
  const start = new Date(now.getFullYear(),0,1);
  const dayOfYear = Math.floor((now - start)/(1000*60*60*24))+1;
  const kishepProgress = dayOfYear/365;
  document.getElementById('k1fill').style.width = (kishepProgress*100)+'%';
  document.getElementById('k1label').textContent = Math.floor(kishepProgress*100)+'%';

  const moonQuarter = (dayOfYear%7)+1;
  document.getElementById('k2fill').style.width = (moonQuarter/7*100)+'%';
  document.getElementById('k2label').textContent = moonQuarter;

  const tokaidoDay = (dayOfYear%7)+1;
  document.getElementById('k3fill').style.width = (tokaidoDay/7*100)+'%';
  document.getElementById('k3label').textContent = tokaidoDay;

  const feyaProgress = (now.getHours()*60+now.getMinutes())/1440;
  document.getElementById('dayFill').style.width = (feyaProgress*100)+'%';
  document.getElementById('dayLabel').textContent = Math.floor(feyaProgress*100)+'%';

  const feyaRow = document.getElementById('feyaRow');
  feyaRow.innerHTML = '';
  for(let i=0;i<7;i++){
    const chip = document.createElement('div');
    chip.className='feyaChip';
    chip.style.background = ['#8fb7d7','#b8a0d1','#e08e84','#d9b070','#efe18a','#9ccf9b','#76cbd0'][i];
    chip.textContent = feyaNames[i];
    feyaRow.appendChild(chip);
  }
}
setInterval(updateBars,1000);
updateBars();
</script>

</body>
</html>

